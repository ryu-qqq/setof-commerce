# REST API Layer ArchUnit ê°€ì´ë“œ

> **ëª©ì **: REST API Layer ì•„í‚¤í…ì²˜ ê·œì¹™ ê°•ì œ ë° ArchUnit í…ŒìŠ¤íŠ¸ ê´€ë¦¬

---

## 1. ê°œìš”

### ArchUnitì´ë€?

ArchUnitì€ Java ì•„í‚¤í…ì²˜ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ì½”ë“œ ë¦¬ë·° ì—†ì´ë„ ì•„í‚¤í…ì²˜ ê·œì¹™ì„ **ìë™ìœ¼ë¡œ ê°•ì œ**í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ArchUnitì˜ ì—­í•                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ë ˆì´ì–´ ì˜ì¡´ì„± ê²€ì¦                                        â”‚
â”‚     â†’ REST API Layer â†’ Domain Layer ì§ì ‘ ì˜ì¡´ ê¸ˆì§€           â”‚
â”‚                                                             â”‚
â”‚  2. ë„¤ì´ë° ê·œì¹™ ê°•ì œ                                          â”‚
â”‚     â†’ Controller, Mapper, DTO ë„¤ì´ë° ì»¨ë²¤ì…˜                   â”‚
â”‚                                                             â”‚
â”‚  3. ì–´ë…¸í…Œì´ì…˜ ê²€ì¦                                           â”‚
â”‚     â†’ @RestController, @Component ìœ„ì¹˜ ê²€ì¦                  â”‚
â”‚                                                             â”‚
â”‚  4. íŒ¨í‚¤ì§€ êµ¬ì¡° ê²€ì¦                                          â”‚
â”‚     â†’ controller, dto, mapper, error ë¶„ë¦¬                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Zero-Tolerance ì •ì±…

**ArchUnit í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ = ë¹Œë“œ ì‹¤íŒ¨**

ëª¨ë“  ì•„í‚¤í…ì²˜ ê·œì¹™ì€ ë¹Œë“œ ì‹œì ì— ê²€ì¦ë˜ë©°, ìœ„ë°˜ ì‹œ ì¦‰ì‹œ ë¹Œë“œê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤.

---

## 2. í˜„ì¬ ì ìš©ëœ ê·œì¹™

### 2.1 REST API Layer ArchUnit í…ŒìŠ¤íŠ¸

**íŒŒì¼ ìœ„ì¹˜**: `adapter-in/rest-api/src/test/java/com/ryuqq/adapter/in/rest/architecture/RestApiLayerArchTest.java`

### 2.2 ê·œì¹™ ëª©ë¡

| ë²ˆí˜¸ | ê·œì¹™ | ì„¤ëª… | ì‹¬ê°ë„ |
|------|------|------|--------|
| 1 | íŒ¨í‚¤ì§€ êµ¬ì¡° ê²€ì¦ | controller, dto, mapper, error, config, filter, auth | ğŸ”´ í•„ìˆ˜ |
| 2 | BCë³„ íŒ¨í‚¤ì§€ êµ¬ì¡° | Bounded ContextëŠ” controller/dto/mapper/error êµ¬ì¡° | ğŸŸ¡ ê¶Œì¥ |
| 3 | Common íŒ¨í‚¤ì§€ êµ¬ì¡° | dto, controller, error, mapper, filter | ğŸ”´ í•„ìˆ˜ |
| 4 | DTO íŒ¨í‚¤ì§€ ë¶„ë¦¬ | command/query/response ë¶„ë¦¬ | ğŸ”´ í•„ìˆ˜ |
| 5 | Port ì˜ì¡´ í•„ìˆ˜ | Controller â†’ Application Port ì˜ì¡´ | ğŸ”´ í•„ìˆ˜ |
| 6 | Domain ì§ì ‘ ì˜ì¡´ ê¸ˆì§€ | REST API â†’ Domain ì§ì ‘ ì˜ì¡´ ê¸ˆì§€ | ğŸ”´ í•„ìˆ˜ |
| 7 | GlobalExceptionHandler Domain Exception ì˜ì¡´ | ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ìœ„í•œ Domain Exception ì˜ì¡´ í—ˆìš© | ğŸ”´ í•„ìˆ˜ |
| 8 | Domain ê°ì²´ ë°˜í™˜ ê¸ˆì§€ | ControllerëŠ” Domain ê°ì²´ ë°˜í™˜ ê¸ˆì§€ | ğŸ”´ í•„ìˆ˜ |
| 9 | Mapper Domain ì˜ì¡´ ê¸ˆì§€ | ErrorMapper ì œì™¸, MapperëŠ” Domain ì˜ì¡´ ê¸ˆì§€ | ğŸ”´ í•„ìˆ˜ |
| 10 | Persistence ì˜ì¡´ ê¸ˆì§€ | REST API â†’ Persistence ì§ì ‘ ì˜ì¡´ ê¸ˆì§€ | ğŸ”´ í•„ìˆ˜ |
| 11 | Config ìœ„ì¹˜ ê²€ì¦ | Config í´ë˜ìŠ¤ëŠ” config íŒ¨í‚¤ì§€ì— ìœ„ì¹˜ | ğŸ”´ í•„ìˆ˜ |
| 12 | Properties ìœ„ì¹˜ ê²€ì¦ | PropertiesëŠ” config.properties íŒ¨í‚¤ì§€ì— ìœ„ì¹˜ | ğŸ”´ í•„ìˆ˜ |
| 13 | Stereotype ê²€ì¦ | @RestController, @Component ì˜¬ë°”ë¥¸ ì‚¬ìš© | ğŸ”´ í•„ìˆ˜ |
| 14 | Lombok ê¸ˆì§€ | REST API Layer ì „ì²´ Lombok ì‚¬ìš© ê¸ˆì§€ | ğŸ”´ í•„ìˆ˜ |

---

## 3. ê·œì¹™ ìƒì„¸ ì„¤ëª…

### 3.1 ë ˆì´ì–´ ì˜ì¡´ì„± ê·œì¹™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í—ˆìš©ëœ ì˜ì¡´ì„±                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  REST API Layer                                             â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”œâ”€â”€â†’ Application Layer (Port) âœ…                      â”‚
â”‚       â”‚         â””â”€ UseCase Interface                        â”‚
â”‚       â”‚         â””â”€ Application DTO                          â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”œâ”€â”€â†’ Domain Exception âœ… (GlobalExceptionHandlerë§Œ)   â”‚
â”‚       â”‚                                                     â”‚
â”‚       â””â”€â”€âœ— Domain Layer âŒ (ì§ì ‘ ì˜ì¡´ ê¸ˆì§€)                  â”‚
â”‚       â””â”€â”€âœ— Persistence Layer âŒ (ì§ì ‘ ì˜ì¡´ ê¸ˆì§€)             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 íŒ¨í‚¤ì§€ êµ¬ì¡° ê·œì¹™

```
adapter-in/rest-api/
â””â”€â”€ src/main/java/com/ryuqq/adapter/in/rest/
    â”œâ”€â”€ common/              # ê³µí†µ ì»´í¬ë„ŒíŠ¸
    â”‚   â”œâ”€â”€ controller/      # GlobalExceptionHandler
    â”‚   â”œâ”€â”€ dto/             # ApiResponse, SliceApiResponse
    â”‚   â”œâ”€â”€ error/           # ErrorMapper
    â”‚   â”œâ”€â”€ mapper/          # ê³µí†µ Mapper
    â”‚   â””â”€â”€ filter/          # ê³µí†µ Filter
    â”‚
    â”œâ”€â”€ config/              # ì„¤ì • í´ë˜ìŠ¤
    â”‚   â””â”€â”€ properties/      # Properties í´ë˜ìŠ¤
    â”‚
    â”œâ”€â”€ auth/                # ì¸ì¦ ê´€ë ¨ (Cross-Cutting)
    â”‚   â””â”€â”€ properties/      # JWT Properties ë“±
    â”‚
    â”œâ”€â”€ {boundedContext}/    # BCë³„ êµ¬ì¡°
    â”‚   â”œâ”€â”€ controller/      # OrderController
    â”‚   â”œâ”€â”€ dto/
    â”‚   â”‚   â”œâ”€â”€ command/     # PlaceOrderApiRequest
    â”‚   â”‚   â”œâ”€â”€ query/       # OrderSearchApiRequest
    â”‚   â”‚   â””â”€â”€ response/    # OrderApiResponse
    â”‚   â”œâ”€â”€ mapper/          # OrderApiMapper
    â”‚   â””â”€â”€ error/           # OrderErrorMapper
    â”‚
    â””â”€â”€ architecture/        # ArchUnit í…ŒìŠ¤íŠ¸ (í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬)
```

### 3.3 Lombok ê¸ˆì§€ ê·œì¹™

```java
// âŒ ê¸ˆì§€ - Lombok ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©
@Data
@Builder
@Getter
@Setter
@AllArgsConstructor
@NoArgsConstructor
@RequiredArgsConstructor
@Value

// âœ… í—ˆìš© - Plain Java
public record PlaceOrderApiRequest(
    @NotNull Long customerId,
    @NotNull Long productId,
    @Positive int quantity
) {}
```

---

## 4. ArchUnit í…ŒìŠ¤íŠ¸ ìˆ˜ì • ê¸ˆì§€ ì •ì±…

### 4.1 ì™œ ìˆ˜ì •ì„ ê¸ˆì§€í•˜ëŠ”ê°€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¨ ArchUnit í…ŒìŠ¤íŠ¸ ìˆ˜ì • ê¸ˆì§€ ì´ìœ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ì•„í‚¤í…ì²˜ ë¬´ê²°ì„± ë³´í˜¸                                      â”‚
â”‚     â†’ ê·œì¹™ ì•½í™” = ê¸°ìˆ  ë¶€ì±„ ì¦ê°€                              â”‚
â”‚                                                             â”‚
â”‚  2. ì¼ê´€ì„± ìœ ì§€                                              â”‚
â”‚     â†’ ëª¨ë“  í”„ë¡œì íŠ¸ì—ì„œ ë™ì¼í•œ ê·œì¹™ ì ìš©                       â”‚
â”‚                                                             â”‚
â”‚  3. í’ˆì§ˆ ë³´ì¦                                                â”‚
â”‚     â†’ ì½”ë“œ ë¦¬ë·° ë¶€ë‹´ ê°ì†Œ, ìë™ ê²€ì¦                          â”‚
â”‚                                                             â”‚
â”‚  4. í•™ìŠµ íš¨ê³¼                                                â”‚
â”‚     â†’ ì‹ ê·œ íŒ€ì›ë„ ê·œì¹™ íŒŒì•… ìš©ì´                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš°

ArchUnit í…ŒìŠ¤íŠ¸ ìˆ˜ì •ì€ **ì•„í‚¤í…ì²˜ ê²°ì • íšŒì˜**ë¥¼ í†µí•´ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```
ìˆ˜ì • ìš”ì²­ í”„ë¡œì„¸ìŠ¤:
1. ì´ìŠˆ ë“±ë¡ (ì™œ ìˆ˜ì •ì´ í•„ìš”í•œì§€ ìƒì„¸ ì„¤ëª…)
2. ì•„í‚¤í…ì²˜ íŒ€ ê²€í† 
3. íŒ€ ë¦¬ë“œ ìŠ¹ì¸
4. PR ë¦¬ë·° (ìµœì†Œ 2ëª… ì•„í‚¤í…ì²˜ íŒ€ ìŠ¹ì¸)
5. ë¬¸ì„œ ì—…ë°ì´íŠ¸ (ë³€ê²½ ì´ë ¥ ê¸°ë¡)
```

---

## 5. Claude Hook ì„¤ì • (ìë™ ë³´í˜¸)

### 5.1 pre-edit Hook ì„¤ì •

```yaml
# .claude/hooks/pre-edit.yml

rules:
  - name: "ArchUnit í…ŒìŠ¤íŠ¸ ìˆ˜ì • ê¸ˆì§€"
    pattern: "**/architecture/*ArchTest.java"
    action: reject
    message: |
      ğŸš¨ ArchUnit í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!

      ì´ íŒŒì¼ì€ í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ë¥¼ ê°•ì œí•˜ëŠ” í•µì‹¬ íŒŒì¼ì…ë‹ˆë‹¤.
      ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš°:
      1. íŒ€ ë¦¬ë“œì™€ ìƒì˜í•˜ì„¸ìš”
      2. ì•„í‚¤í…ì²˜ ê²°ì • íšŒì˜ë¥¼ ìš”ì²­í•˜ì„¸ìš”
      3. ë³€ê²½ ìŠ¹ì¸ í›„ íŒ€ ë¦¬ë“œê°€ ì§ì ‘ ìˆ˜ì •í•©ë‹ˆë‹¤

      ì°¸ê³  ë¬¸ì„œ: docs/coding_convention/01-adapter-in-layer/rest-api/testing/04_rest-api-archunit-guide.md

  - name: "Test Fixtures ArchUnit ìˆ˜ì • ê¸ˆì§€"
    pattern: "**/test-fixtures/*ArchTest.java"
    action: reject
    message: |
      ğŸš¨ Test Fixtures ArchUnit íŒŒì¼ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!
```

### 5.2 Claude ì„¤ì • íŒŒì¼

```yaml
# .claude/settings.yml

protected_files:
  # ArchUnit í…ŒìŠ¤íŠ¸
  - "**/architecture/*ArchTest.java"
  - "**/architecture/*ArchitectureTest.java"

  # í•µì‹¬ ì„¤ì •
  - ".claude/hooks/**"
  - ".github/CODEOWNERS"

edit_restrictions:
  - pattern: "**/architecture/**"
    allowed_users: ["team-leads", "architecture-team"]
    message: "ArchUnit í…ŒìŠ¤íŠ¸ëŠ” ì•„í‚¤í…ì²˜ íŒ€ë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
```

---

## 6. CODEOWNERS ì„¤ì • (GitHub)

```
# .github/CODEOWNERS

# ArchUnit í…ŒìŠ¤íŠ¸ - ì•„í‚¤í…ì²˜ íŒ€ í•„ìˆ˜ ë¦¬ë·°
**/architecture/*ArchTest.java @team-leads @architecture-team
**/architecture/*ArchitectureTest.java @team-leads @architecture-team

# í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì³ ArchUnit
**/test-fixtures/*ArchTest.java @team-leads @architecture-team

# Claude ì„¤ì •
.claude/** @team-leads

# ì½”ë”© ì»¨ë²¤ì…˜ ë¬¸ì„œ
docs/coding_convention/** @team-leads @architecture-team
```

---

## 7. ìƒˆë¡œìš´ ê·œì¹™ ì¶”ê°€ ê°€ì´ë“œ

### 7.1 ê·œì¹™ ì¶”ê°€ í”„ë¡œì„¸ìŠ¤

```
1. í•„ìš”ì„± ê²€í† 
   â””â”€ ì™œ ì´ ê·œì¹™ì´ í•„ìš”í•œê°€?
   â””â”€ ê¸°ì¡´ ê·œì¹™ìœ¼ë¡œ ì»¤ë²„ë˜ì§€ ì•ŠëŠ”ê°€?

2. ê·œì¹™ ì •ì˜
   â””â”€ ì–´ë–¤ íŒ¨í„´ì„ ê¸ˆì§€/ê°•ì œí•  ê²ƒì¸ê°€?
   â””â”€ ì˜ˆì™¸ ì¼€ì´ìŠ¤ëŠ” ë¬´ì—‡ì¸ê°€?

3. í…ŒìŠ¤íŠ¸ ì‘ì„±
   â””â”€ ArchUnit í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
   â””â”€ allowEmptyShould(true) ì„¤ì • (ì´ˆê¸°)

4. ë¬¸ì„œí™”
   â””â”€ ì´ ê°€ì´ë“œ ë¬¸ì„œ ì—…ë°ì´íŠ¸
   â””â”€ ê·œì¹™ ëª©ë¡ì— ì¶”ê°€

5. ë¦¬ë·° ë° ìŠ¹ì¸
   â””â”€ ì•„í‚¤í…ì²˜ íŒ€ ë¦¬ë·°
   â””â”€ íŒ€ ë¦¬ë“œ ìŠ¹ì¸
```

### 7.2 ê·œì¹™ ì‘ì„± ì˜ˆì‹œ

```java
/**
 * ê·œì¹™ XX: ìƒˆë¡œìš´ ê·œì¹™ ì„¤ëª…
 *
 * <p>ì´ ê·œì¹™ì´ í•„ìš”í•œ ì´ìœ ì™€ ë°°ê²½ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
 */
@Test
@DisplayName("[ê¸ˆì§€] ìƒˆë¡œìš´ ê·œì¹™ ì„¤ëª…")
void newRule_MustNotDoSomething() {
    ArchRule rule =
            noClasses()
                    .that()
                    .resideInAPackage("..adapter.in.rest..")
                    .should()
                    .dependOnClassesThat()
                    .resideInAnyPackage("..forbidden.package..")
                    .because("ì´ ì˜ì¡´ì„±ì´ ê¸ˆì§€ëœ ì´ìœ ë¥¼ ëª…í™•íˆ ì„¤ëª…í•©ë‹ˆë‹¤");

    rule.allowEmptyShould(true).check(classes);
}
```

---

## 8. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 8.1 ê·œì¹™ ìœ„ë°˜ ì‹œ í•´ê²° ë°©ë²•

```
ArchUnit í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨!

ì›ì¸ ë¶„ì„:
1. ì–´ë–¤ ê·œì¹™ì´ ìœ„ë°˜ë˜ì—ˆëŠ”ê°€?
2. ì–´ë–¤ í´ë˜ìŠ¤ê°€ ìœ„ë°˜í–ˆëŠ”ê°€?
3. ì™œ ìœ„ë°˜í–ˆëŠ”ê°€?

í•´ê²° ë°©ë²•:
1. ì½”ë“œ ìˆ˜ì • (ê·œì¹™ ì¤€ìˆ˜)
   â†’ ì˜ì¡´ì„± ì œê±°/ë³€ê²½
   â†’ íŒ¨í‚¤ì§€ ì´ë™
   â†’ ë„¤ì´ë° ë³€ê²½

2. ì˜ˆì™¸ ì²˜ë¦¬ ìš”ì²­ (ê·œì¹™ì´ ì˜ëª»ëœ ê²½ìš°)
   â†’ ì•„í‚¤í…ì²˜ íŒ€ì— ì´ìŠˆ ë“±ë¡
   â†’ ì •ë‹¹í•œ ì‚¬ìœ  ì„¤ëª…
```

### 8.2 ì¼ë°˜ì ì¸ ìœ„ë°˜ ì‚¬ë¡€

| ìœ„ë°˜ | ì›ì¸ | í•´ê²° |
|------|------|------|
| Domain ì§ì ‘ ì˜ì¡´ | Controllerì—ì„œ Domain Entity ì‚¬ìš© | Application DTOë¡œ ë³€í™˜ |
| Lombok ì‚¬ìš© | @Data, @Builder ë“± ì‚¬ìš© | Record ë˜ëŠ” Plain Java |
| ì˜ëª»ëœ íŒ¨í‚¤ì§€ | DTOê°€ dto ì™¸ë¶€ì— ìœ„ì¹˜ | ì˜¬ë°”ë¥¸ íŒ¨í‚¤ì§€ë¡œ ì´ë™ |
| Persistence ì˜ì¡´ | Repository ì§ì ‘ í˜¸ì¶œ | UseCaseë¥¼ í†µí•´ í˜¸ì¶œ |

---

## 9. ì²´í¬ë¦¬ìŠ¤íŠ¸

### ArchUnit í…ŒìŠ¤íŠ¸ ê´€ë¦¬

- [ ] ìƒˆë¡œìš´ ê·œì¹™ ì¶”ê°€ ì‹œ ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [ ] ê·œì¹™ ìˆ˜ì • ì‹œ ì•„í‚¤í…ì²˜ íŒ€ ìŠ¹ì¸
- [ ] CODEOWNERS ì„¤ì • í™•ì¸
- [ ] Claude Hook ì„¤ì • í™•ì¸

### ê·œì¹™ ìœ„ë°˜ í•´ê²°

- [ ] ìœ„ë°˜ ì›ì¸ íŒŒì•…
- [ ] ì½”ë“œ ìˆ˜ì • (ê·œì¹™ ì¤€ìˆ˜)
- [ ] ìˆ˜ì • í›„ í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰
- [ ] ë¶ˆí•©ë¦¬í•œ ê·œì¹™ì€ ì´ìŠˆ ë“±ë¡

---

## 10. í”„ë¡œì íŠ¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### 10.1 íŒ¨í‚¤ì§€ ê²½ë¡œ ë³€ê²½

ì´ í…œí”Œë¦¿ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì— ì ìš©í•  ë•Œ, **ë‹¨ í•œ ê³³ë§Œ ë³€ê²½**í•˜ë©´ ëª¨ë“  ArchUnit í…ŒìŠ¤íŠ¸ê°€ ìë™ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.

#### ë³€ê²½ íŒŒì¼

```
adapter-in/rest-api/src/test/java/com/ryuqq/adapter/in/rest/architecture/ArchUnitPackageConstants.java
```

#### ë³€ê²½ ë°©ë²•

```java
public final class ArchUnitPackageConstants {

    // ========================================================================
    // ğŸ”§ í”„ë¡œì íŠ¸ ì ìš© ì‹œ ì´ ê°’ë§Œ ë³€ê²½í•˜ì„¸ìš”
    // ========================================================================

    /**
     * í”„ë¡œì íŠ¸ ê¸°ë³¸ íŒ¨í‚¤ì§€ (ë£¨íŠ¸ íŒ¨í‚¤ì§€)
     */
    public static final String BASE_PACKAGE = "com.ryuqq";  // â† ì´ ê°’ë§Œ ë³€ê²½!

    // ì•„ë˜ ìƒìˆ˜ë“¤ì€ ìë™ìœ¼ë¡œ íŒŒìƒë¨
    public static final String ADAPTER_IN_REST = BASE_PACKAGE + ".adapter.in.rest";
    public static final String DOMAIN = BASE_PACKAGE + ".domain";
    // ...
}
```

### 10.2 ìƒìˆ˜ í´ë˜ìŠ¤ êµ¬ì¡°

`ArchUnitPackageConstants`ëŠ” ëª¨ë“  REST API Layer ArchUnit í…ŒìŠ¤íŠ¸ì—ì„œ ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

```java
// ë ˆì´ì–´ë³„ íŒ¨í‚¤ì§€
ADAPTER_IN_REST          // REST API Adapter Layer
DOMAIN                   // Domain Layer
APPLICATION              // Application Layer
ADAPTER_OUT_PERSISTENCE  // Persistence Adapter Layer

// ì„œë¸Œ íŒ¨í‚¤ì§€ íŒ¨í„´
CONTROLLER_PATTERN       // "..controller.."
DTO_PATTERN              // "..dto.."
MAPPER_PATTERN           // "..mapper.."
ERROR_PATTERN            // "..error.."

// DTO ì„œë¸Œ íŒ¨í‚¤ì§€ íŒ¨í„´
DTO_COMMAND_PATTERN      // "..dto.command.."
DTO_QUERY_PATTERN        // "..dto.query.."
DTO_RESPONSE_PATTERN     // "..dto.response.."

// Domain ê´€ë ¨ íŒ¨í„´
DOMAIN_ALL               // Domain ì „ì²´ íŒ¨í‚¤ì§€
DOMAIN_EXCEPTION_ALL     // Domain Exception íŒ¨í‚¤ì§€
```

### 10.3 ì ìš© í™•ì¸

```bash
# 1. ìƒìˆ˜ ë³€ê²½ í›„ ì»´íŒŒì¼ í…ŒìŠ¤íŠ¸
./gradlew :adapter-in:rest-api:compileTestJava

# 2. ArchUnit í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew :adapter-in:rest-api:test --tests "*ArchTest*"
```

### 10.4 ì°¸ê³ 

ìì„¸í•œ í”„ë¡œì íŠ¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• ë°©ë²•ì€ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”:

- [í”„ë¡œì íŠ¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ì´ë“œ](../../../00-project-setup/project-customization-guide.md)

---

## 11. ì°¸ê³  ë¬¸ì„œ

- [ArchUnit ê³µì‹ ë¬¸ì„œ](https://www.archunit.org/userguide/html/000_Index.html)
- [REST API í†µí•© í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ](./01_rest-api-testing-guide.md)
- [Test Fixtures ArchUnit](../../../05-testing/test-fixtures/02_test-fixtures-archunit.md)
- [REST API Layer ì „ì²´ ê°€ì´ë“œ](../rest-api-guide.md)

---

**ì‘ì„±ì**: Development Team
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-12-08
**ë²„ì „**: 1.0.0

---

## âš ï¸ ì¤‘ìš” ê³µì§€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”’ ì´ ë¬¸ì„œì—ì„œ ì„¤ëª…í•˜ëŠ” ArchUnit í…ŒìŠ¤íŠ¸ íŒŒì¼ì€               â”‚
â”‚     ì•„í‚¤í…ì²˜ íŒ€ ìŠ¹ì¸ ì—†ì´ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.                  â”‚
â”‚                                                             â”‚
â”‚  ìˆ˜ì • ì‹œë„ ì‹œ:                                               â”‚
â”‚  â€¢ Claude Hookì— ì˜í•´ ìë™ ê±°ë¶€ë©ë‹ˆë‹¤                        â”‚
â”‚  â€¢ GitHub PRì—ì„œ CODEOWNERS ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤                â”‚
â”‚  â€¢ ë¬´ë‹¨ ìˆ˜ì • ì‹œ ë¹Œë“œê°€ ì‹¤íŒ¨í•©ë‹ˆë‹¤                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
