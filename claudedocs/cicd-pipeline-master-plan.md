# CI/CD íŒŒì´í”„ë¼ì¸ ë§ˆìŠ¤í„° í”Œëœ

> ì‘ì„±ì¼: 2025-01-15
> ìƒíƒœ: ê³„íš ìˆ˜ë¦½ ì™„ë£Œ, ì‹¤í–‰ ëŒ€ê¸°

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### ë°°ê²½
- **í”„ë¡œì íŠ¸ ì„±ê²©**: ë ˆê±°ì‹œ â†’ ìƒˆ ì„œë²„ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
- **ëª©í‘œ**: ì²´ê³„ì ì¸ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ë° ì ì§„ì  íŠ¸ë˜í”½ ì´ê´€

### ë¸Œëœì¹˜ ì „ëµ
```
feature/* â†’ dev â†’ stage â†’ prod(main)
```

| ë¸Œëœì¹˜ | ìš©ë„ | ë°°í¬ í™˜ê²½ |
|--------|------|-----------|
| `dev` | í”„ë¡ íŠ¸ ê°œë°œì í˜‘ì—…, Mock Server ê¸°ë°˜ | Dev (ê²½ëŸ‰) |
| `stage` | QA/í†µí•© í…ŒìŠ¤íŠ¸, ìš´ì˜ê³¼ ë™ì¼ í™˜ê²½ | Stage ECS + Stage DB |
| `main` (prod) | ì‹¤ ìš´ì˜, Strangler Pattern ì ìš© | Prod ECS + Prod DB |

---

## ğŸ“Š í˜„ì¬ ìƒíƒœ ë¶„ì„

### í˜„ì¬ CI/CD êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í˜„ì¬ ìƒíƒœ (ë¬¸ì œì )                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ë¸Œëœì¹˜: main, develop (stage ì—†ìŒ)                                  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ ci.yml   â”‚â”€â”€â”€â†’â”‚ main/develop push â†’ Test Only     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ build-deploy.ymlâ”‚â”€â”€â”€â†’â”‚ main push â†’ Legacyë§Œ Prod  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ (web-api, migration ì—†ìŒ)  â”‚             â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                     â”‚
â”‚  âŒ Stage í™˜ê²½ íŒŒì´í”„ë¼ì¸ ì—†ìŒ                                       â”‚
â”‚  âŒ ìƒˆ ëª¨ë“ˆ ë°°í¬ íŒŒì´í”„ë¼ì¸ ì—†ìŒ                                      â”‚
â”‚  âŒ Dev í™˜ê²½ ìë™í™” ì—†ìŒ                                             â”‚
â”‚  âŒ Strangler Pattern ë¯¸êµ¬í˜„                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Bootstrap ëª¨ë“ˆ í˜„í™©

| ëª¨ë“ˆ | ìƒíƒœ | CI/CD | ë°°í¬ í™˜ê²½ |
|------|------|-------|-----------|
| `bootstrap-legacy-web-api` | âœ… ìš´ì˜ì¤‘ | âœ… prod | prod |
| `bootstrap-legacy-web-api-admin` | âœ… ìš´ì˜ì¤‘ | âœ… prod | prod |
| `bootstrap-batch` | âœ… ìš´ì˜ì¤‘ | âœ… prod | prod |
| `bootstrap-web-api` | ğŸ”§ ê°œë°œì¤‘ | âŒ ì—†ìŒ | - |
| `bootstrap-web-api-admin` | ğŸ”§ ê°œë°œì¤‘ | âŒ ì—†ìŒ | - |
| `bootstrap-migration` | ğŸ”§ ê°œë°œì¤‘ | âŒ ì—†ìŒ | - |

### ê¸°ì¡´ íŒŒì¼ êµ¬ì¡°

```
.github/workflows/
â”œâ”€â”€ ci.yml                  # í…ŒìŠ¤íŠ¸/í’ˆì§ˆ ê²€ì¦ (main, develop)
â”œâ”€â”€ build-and-deploy.yml    # Legacyë§Œ Prod ë°°í¬
â”œâ”€â”€ terraform-plan.yml      # Terraform Plan
â””â”€â”€ terraform-apply.yml     # Terraform Apply

bootstrap/
â”œâ”€â”€ bootstrap-legacy-web-api/        # âœ… ë°°í¬ ì¤‘
â”œâ”€â”€ bootstrap-legacy-web-api-admin/  # âœ… ë°°í¬ ì¤‘
â”œâ”€â”€ bootstrap-batch/                 # âœ… ë°°í¬ ì¤‘
â”œâ”€â”€ bootstrap-web-api/               # âŒ ë°°í¬ íŒŒì´í”„ë¼ì¸ ì—†ìŒ
â”œâ”€â”€ bootstrap-web-api-admin/         # âŒ ë°°í¬ íŒŒì´í”„ë¼ì¸ ì—†ìŒ
â””â”€â”€ bootstrap-migration/             # âŒ ë°°í¬ íŒŒì´í”„ë¼ì¸ ì—†ìŒ

local-dev/
â”œâ”€â”€ docker-compose.aws.yml
â”œâ”€â”€ scripts/
â””â”€â”€ .env.aws, .env.aws.stage

mock-server/
â”œâ”€â”€ docker-compose.yml      # WireMock
â”œâ”€â”€ mappings/               # API ë§¤í•‘
â””â”€â”€ __files/responses/      # ì‘ë‹µ JSON
```

---

## ğŸ¯ ëª©í‘œ CI/CD ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ëª©í‘œ CI/CD íŒŒì´í”„ë¼ì¸                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Feature Branch â†’ PR â†’ dev â†’ stage â†’ prod                                  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ DEV ë¸Œëœì¹˜ (í”„ë¡ íŠ¸ ê°œë°œììš©)                                          â”‚   â”‚
â”‚  â”‚  â€¢ PR ë¨¸ì§€ ì‹œ ìë™ ë¹Œë“œ                                              â”‚   â”‚
â”‚  â”‚  â€¢ Mock Server ìë™ ë°°í¬ ë˜ëŠ” ê²½ëŸ‰ ì„œë¹„ìŠ¤                              â”‚   â”‚
â”‚  â”‚  â€¢ docker-composeë¡œ í•„ìš”í•œ ì„œë¹„ìŠ¤ë§Œ ë¡œì»¬ì—ì„œ ë„ìš¸ ìˆ˜ ìˆê²Œ              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                              â”‚
â”‚                              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ STAGE ë¸Œëœì¹˜                                                         â”‚   â”‚
â”‚  â”‚  â€¢ dev â†’ stage ë¨¸ì§€ ì‹œ ìë™ ë°°í¬                                      â”‚   â”‚
â”‚  â”‚  â€¢ ìš´ì˜ê³¼ ë™ì¼í•œ ì¸í”„ë¼ (ECS, RDS-Stage)                              â”‚   â”‚
â”‚  â”‚  â€¢ QA/í†µí•© í…ŒìŠ¤íŠ¸ í™˜ê²½                                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                              â”‚
â”‚                              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ PROD ë¸Œëœì¹˜ (main)                                                   â”‚   â”‚
â”‚  â”‚  â€¢ stage â†’ prod ë¨¸ì§€ + ìˆ˜ë™ ìŠ¹ì¸                                      â”‚   â”‚
â”‚  â”‚  â€¢ Gateway + Strangler Pattern                                       â”‚   â”‚
â”‚  â”‚    - v1: Legacy ì„œë²„ (ê¸°ì¡´)                                          â”‚   â”‚
â”‚  â”‚    - v2: ìƒˆ ì„œë²„ (ì ì§„ì  íŠ¸ë˜í”½ ì´ê´€)                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Phaseë³„ ìƒì„¸ ê³„íš

### Phase 1: ë¸Œëœì¹˜ ì „ëµ ë° ê¸°ë³¸ êµ¬ì¡° (ì˜ˆìƒ 1-2ì¼)

#### 1.1 ë¸Œëœì¹˜ ë³´í˜¸ ê·œì¹™ ì„¤ì •
- [ ] `dev` ë¸Œëœì¹˜ ìƒì„±
- [ ] `stage` ë¸Œëœì¹˜ ìƒì„±
- [ ] GitHub ë¸Œëœì¹˜ ë³´í˜¸ ê·œì¹™ ì„¤ì •
  - main: PR í•„ìˆ˜, 1ëª… ì´ìƒ ìŠ¹ì¸, CI í†µê³¼ í•„ìˆ˜
  - stage: PR í•„ìˆ˜, CI í†µê³¼ í•„ìˆ˜
  - dev: ì§ì ‘ push í—ˆìš© ë˜ëŠ” PR

#### 1.2 í™˜ê²½ë³„ ì„¤ì • íŒŒì¼ ì •ë¦¬
- [ ] `application-dev.yml` ê²€í† /ìƒì„±
- [ ] `application-stage.yml` ê²€í† /ìƒì„±
- [ ] `application-prod.yml` ê²€í† /ìƒì„±
- [ ] í™˜ê²½ ë³€ìˆ˜ ë¶„ë¦¬ (DB URL, Secret ë“±)

#### 1.3 CI ì›Œí¬í”Œë¡œìš° ë¸Œëœì¹˜ ë¶„ê¸° ì¶”ê°€
- [ ] `ci.yml`ì— dev, stage ë¸Œëœì¹˜ íŠ¸ë¦¬ê±° ì¶”ê°€
- [ ] ë¸Œëœì¹˜ë³„ í…ŒìŠ¤íŠ¸ ë²”ìœ„ ì°¨ë³„í™” (ì„ íƒì )

---

### Phase 2: Dev í™˜ê²½ êµ¬ì¶• (ì˜ˆìƒ 2-3ì¼)

#### 2.1 Mock Server ê°•í™”
- [ ] í”„ë¡ íŠ¸ì—ì„œ í•„ìš”í•œ API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡ í™•ì¸
- [ ] WireMock ë§¤í•‘ ì¶”ê°€
- [ ] docker-compose ì‹¤í–‰ ê°„ì†Œí™”
- [ ] README ë¬¸ì„œ ì—…ë°ì´íŠ¸

#### 2.2 docker-compose ë¡œì»¬ ê°œë°œ í™˜ê²½
- [ ] ì„ íƒì  ì„œë¹„ìŠ¤ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
  ```bash
  # ì˜ˆì‹œ
  ./local-dev/scripts/start.sh web-api        # web-apië§Œ
  ./local-dev/scripts/start.sh legacy-api     # legacyë§Œ
  ./local-dev/scripts/start.sh all            # ì „ì²´
  ```
- [ ] ë¡œì»¬ DB ì—°ë™ ì˜µì…˜ ì¶”ê°€
- [ ] í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿ (.env.example)

#### 2.3 dev ë¸Œëœì¹˜ ìë™í™” (ì„ íƒì )
- [ ] PR ë¨¸ì§€ ì‹œ mock-server ë²„ì „ íƒœê¹…
- [ ] ê°„ë‹¨í•œ í—¬ìŠ¤ì²´í¬ ì•Œë¦¼

---

### Phase 3: Stage í™˜ê²½ CI/CD (ì˜ˆìƒ 3-4ì¼)

#### 3.1 Stage ì „ìš© Terraform ê²€í† /ë³´ì™„
í˜„ì¬ ì¡´ì¬í•˜ëŠ” stage ê´€ë ¨ terraform:
- `terraform/ecs-web-api-legacy-stage/`
- `terraform/ecs-web-api-legacy-admin-stage/`
- `terraform/ecs-cluster-stage/`

ì‘ì—… ëª©ë¡:
- [ ] Stage ECS Cluster ì„¤ì • í™•ì¸
- [ ] Stageìš© ECR Repository í™•ì¸/ìƒì„±
- [ ] Stage RDS ì—°ê²° ì„¤ì • í™•ì¸
- [ ] ìƒˆ ëª¨ë“ˆìš© Stage ECS Service ìƒì„±
  - [ ] `ecs-web-api-stage/`
  - [ ] `ecs-web-api-admin-stage/`
  - [ ] `ecs-migration-stage/`

#### 3.2 Stage ë°°í¬ ì›Œí¬í”Œë¡œìš° ìƒì„±
ìƒˆ íŒŒì¼: `.github/workflows/stage-build-deploy.yml`

```yaml
# íŠ¸ë¦¬ê±°: stage ë¸Œëœì¹˜ push
# ëŒ€ìƒ: ëª¨ë“  ëª¨ë“ˆ (legacy + new)
# í™˜ê²½: Stage ECS Cluster
```

- [ ] ì›Œí¬í”Œë¡œìš° íŒŒì¼ ìƒì„±
- [ ] ë³€ê²½ ê°ì§€ ë¡œì§ (path filter)
- [ ] ë³‘ë ¬ ë¹Œë“œ ì„¤ì •
- [ ] Stage ECS ë°°í¬ ì„¤ì •

#### 3.3 Stage í™˜ê²½ ê²€ì¦
- [ ] ìë™ ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
- [ ] í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
- [ ] Slack ì•Œë¦¼ ì—°ë™

---

### Phase 4: Prod í™˜ê²½ + Strangler Pattern (ì˜ˆìƒ 4-5ì¼)

#### 4.1 Gateway ì„¤ì • (API Gateway ë˜ëŠ” ALB)
```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   API Gateway   â”‚
                    â”‚   ë˜ëŠ” ALB      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚              â”‚              â”‚
              â–¼              â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ /api/v1/*   â”‚  â”‚ /api/v2/*   â”‚  â”‚ /api/admin  â”‚
    â”‚ Legacy API  â”‚  â”‚ New API     â”‚  â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- [ ] ë¼ìš°íŒ… ì „ëµ ê²°ì • (Path ê¸°ë°˜ vs Header ê¸°ë°˜)
- [ ] ALB Target Group ì„¤ì •
- [ ] íŠ¸ë˜í”½ ê°€ì¤‘ì¹˜ ì¡°ì ˆ ë°©ë²• ê²°ì •

#### 4.2 Prod ë°°í¬ ì›Œí¬í”Œë¡œìš° ê°œì„ 
- [ ] `build-and-deploy.yml` í™•ì¥
  - Legacy ëª¨ë“ˆ ìœ ì§€
  - ìƒˆ ëª¨ë“ˆ ì¶”ê°€ (ì¡°ê±´ë¶€ ë°°í¬)
- [ ] stage â†’ main PR ìƒì„± ìë™í™” (ì„ íƒì )
- [ ] ìˆ˜ë™ ìŠ¹ì¸ ê²Œì´íŠ¸ ì¶”ê°€
- [ ] Rollback ì ˆì°¨ ë¬¸ì„œí™”

#### 4.3 íŠ¸ë˜í”½ ì´ê´€ ì „ëµ
```
ë‹¨ê³„ë³„ íŠ¸ë˜í”½ ì „í™˜:
1. 5% â†’ ìƒˆ ì„œë²„ (ì´ˆê¸° í…ŒìŠ¤íŠ¸)
2. 25% â†’ ìƒˆ ì„œë²„ (ëª¨ë‹ˆí„°ë§)
3. 50% â†’ ìƒˆ ì„œë²„ (ì•ˆì •í™”)
4. 100% â†’ ìƒˆ ì„œë²„ (ì™„ì „ ì´ê´€)
```

- [ ] íŠ¸ë˜í”½ ì „í™˜ ìŠ¤í¬ë¦½íŠ¸/ì›Œí¬í”Œë¡œìš°
- [ ] ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ì„¤ì •
- [ ] Rollback ìë™í™”

---

### Phase 5: ìƒˆ ëª¨ë“ˆ íŒŒì´í”„ë¼ì¸ ì¶”ê°€ (ì˜ˆìƒ 2-3ì¼)

#### 5.1 build-and-deploy.yml í™•ì¥
ì¶”ê°€í•  ëª¨ë“ˆ:
- [ ] `web-api` (bootstrap-web-api)
- [ ] `web-api-admin` (bootstrap-web-api-admin)
- [ ] `migration` (bootstrap-migration)

ì‘ì—…:
- [ ] ë³€ê²½ ê°ì§€ path filter ì¶”ê°€
- [ ] ë¹Œë“œ Job ì¶”ê°€
- [ ] ë°°í¬ Job ì¶”ê°€

#### 5.2 ëª¨ë“ˆë³„ Terraform ì„¤ì •
- [ ] ECR Repository ìƒì„±
  - [ ] `setof-commerce-web-api-{stage|prod}`
  - [ ] `setof-commerce-web-api-admin-{stage|prod}`
  - [ ] `setof-commerce-migration-{stage|prod}`
- [ ] ECS Task Definition ìƒì„±
- [ ] ECS Service ìƒì„± (Stage + Prod)

#### 5.3 í†µí•© í…ŒìŠ¤íŠ¸ íŒŒì´í”„ë¼ì¸ (ì„ íƒì )
- [ ] E2E í…ŒìŠ¤íŠ¸ ìë™í™”
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (k6, Artillery ë“±)

---

## ğŸš€ ê¶Œì¥ ì‹¤í–‰ ìˆœì„œ

```
ìš°ì„ ìˆœìœ„ ë†’ìŒ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£ Phase 1 + Phase 3 (ë¸Œëœì¹˜ + Stage í™˜ê²½)
   â†’ ê°€ì¥ ì‹œê¸‰: Stage í™˜ê²½ì´ ìˆì–´ì•¼ ì•ˆì „í•œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
   â†’ ì˜ˆìƒ ì†Œìš”: 4-6ì¼

2ï¸âƒ£ Phase 4 (Prod + Strangler Pattern)
   â†’ ì ì§„ì  ì´ê´€ì˜ í•µì‹¬
   â†’ ì˜ˆìƒ ì†Œìš”: 4-5ì¼

3ï¸âƒ£ Phase 5 (ìƒˆ ëª¨ë“ˆ ì¶”ê°€)
   â†’ Stage í™˜ê²½ ì¤€ë¹„ í›„ ìƒˆ ì„œë¹„ìŠ¤ ë°°í¬
   â†’ ì˜ˆìƒ ì†Œìš”: 2-3ì¼

4ï¸âƒ£ Phase 2 (Dev í™˜ê²½)
   â†’ í”„ë¡ íŠ¸ ê°œë°œì í˜‘ì—… ì‹œ í•„ìš”í•  ë•Œ
   â†’ ì˜ˆìƒ ì†Œìš”: 2-3ì¼

ìš°ì„ ìˆœìœ„ ë‚®ìŒ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ“ ìƒì„±/ìˆ˜ì • ì˜ˆì • íŒŒì¼ ëª©ë¡

### GitHub Workflows
```
.github/workflows/
â”œâ”€â”€ ci.yml                      # ìˆ˜ì •: dev, stage ë¸Œëœì¹˜ ì¶”ê°€
â”œâ”€â”€ build-and-deploy.yml        # ìˆ˜ì •: ìƒˆ ëª¨ë“ˆ ì¶”ê°€
â”œâ”€â”€ stage-build-deploy.yml      # ì‹ ê·œ: Stage í™˜ê²½ ë°°í¬
â””â”€â”€ create-release-pr.yml       # ì‹ ê·œ: stage â†’ main PR ìë™í™” (ì„ íƒ)
```

### Terraform
```
terraform/
â”œâ”€â”€ ecs-web-api-stage/          # ì‹ ê·œ
â”œâ”€â”€ ecs-web-api-admin-stage/    # ì‹ ê·œ
â”œâ”€â”€ ecs-migration-stage/        # ì‹ ê·œ
â””â”€â”€ ecr/                        # ìˆ˜ì •: ìƒˆ Repository ì¶”ê°€
```

### ì„¤ì • íŒŒì¼
```
bootstrap/*/src/main/resources/
â”œâ”€â”€ application-dev.yml         # ê²€í† /ìˆ˜ì •
â”œâ”€â”€ application-stage.yml       # ê²€í† /ìˆ˜ì •
â””â”€â”€ application-prod.yml        # ê²€í† /ìˆ˜ì •
```

### ë¬¸ì„œ
```
docs/
â”œâ”€â”€ cicd/
â”‚   â”œâ”€â”€ branch-strategy.md      # ë¸Œëœì¹˜ ì „ëµ ë¬¸ì„œ
â”‚   â”œâ”€â”€ deployment-guide.md     # ë°°í¬ ê°€ì´ë“œ
â”‚   â””â”€â”€ rollback-procedure.md   # ë¡¤ë°± ì ˆì°¨
â””â”€â”€ local-dev/
    â””â”€â”€ README.md               # ë¡œì»¬ ê°œë°œ í™˜ê²½ ê°€ì´ë“œ
```

---

## ğŸ“Œ ì£¼ì˜ì‚¬í•­ ë° ì˜ì¡´ì„±

### AWS ë¦¬ì†ŒìŠ¤ ì˜ì¡´ì„±
- ECR Repository ìƒì„± í•„ìš” (ìƒˆ ëª¨ë“ˆìš©)
- ECS Cluster (Stage) í™•ì¸ í•„ìš”
- RDS Stage ì¸ìŠ¤í„´ìŠ¤ ì—°ê²° ì •ë³´ í•„ìš”
- ALB/API Gateway ì„¤ì • í•„ìš” (Strangler Pattern)

### ì‹œí¬ë¦¿ ê´€ë¦¬
- `AWS_ROLE_ARN`: GitHub Secrets
- `SLACK_WEBHOOK_URL`: GitHub Secrets
- DB ì ‘ì† ì •ë³´: AWS Parameter Store / Secrets Manager

### ê¸°ì¡´ ìš´ì˜ ì˜í–¥ë„
- Legacy ëª¨ë“ˆ ë°°í¬ëŠ” ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€
- ìƒˆ ëª¨ë“ˆì€ ì ì§„ì ìœ¼ë¡œ ì¶”ê°€
- Strangler Patternìœ¼ë¡œ íŠ¸ë˜í”½ ë¶„ì‚°

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [GitHub Workflows Guide](../docs/coding_convention/00-project-setup/github-workflows-guide.md)
- [Local Dev Setup](../local-dev/README.md)
- [Mock Server](../mock-server/README.md)

---

## ğŸ“ ì§„í–‰ ìƒíƒœ

| Phase | ìƒíƒœ | ì‹œì‘ì¼ | ì™„ë£Œì¼ | ë‹´ë‹¹ì |
|-------|------|--------|--------|--------|
| Phase 1 | â³ ëŒ€ê¸° | - | - | - |
| Phase 2 | â³ ëŒ€ê¸° | - | - | - |
| Phase 3 | â³ ëŒ€ê¸° | - | - | - |
| Phase 4 | â³ ëŒ€ê¸° | - | - | - |
| Phase 5 | â³ ëŒ€ê¸° | - | - | - |
