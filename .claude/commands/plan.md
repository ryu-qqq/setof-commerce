---
description: ê¸°ëŠ¥ ë¶„ì„ ë° êµ¬í˜„ ê³„íš ìˆ˜ë¦½. ìš”êµ¬ì‚¬í•­ ë¶„ì„ â†’ ì˜í–¥ë„ ë¶„ì„ â†’ êµ¬í˜„ ì „ëµ ê²°ì •. Serena memory ìë™ ì €ì¥.
tags: [project]
---

# /plan - Feature Planning & Analysis

ê¸°ëŠ¥ ìš”ì²­ì„ ë¶„ì„í•˜ê³  êµ¬í˜„ ê³„íšì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.

## ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤

```
/plan "ì£¼ë¬¸ ì·¨ì†Œ ê¸°ëŠ¥"
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ ìš”êµ¬ì‚¬í•­ ë¶„ì„ (requirements-analyst)          â”‚
â”‚    - ì§ˆë¬¸ìœ¼ë¡œ ë””í…Œì¼ í™•ë³´                         â”‚
â”‚    - ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ë„ì¶œ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ ì˜í–¥ë„ ë¶„ì„ (layer-architect)                â”‚
â”‚    - ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰ (Serena MCP)                 â”‚
â”‚    - ìˆ˜ì • vs ì‹ ê·œ íŒë‹¨                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ï¸âƒ£ êµ¬í˜„ ì „ëµ ê²°ì •                               â”‚
â”‚    - ğŸ”§ ê¸°ì¡´ ìˆ˜ì •: TDD â†’ /kb/*/go               â”‚
â”‚    - ğŸ†• ì‹ ê·œ ìƒì„±: Doc-Driven â†’ /impl           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4ï¸âƒ£ Serena memory ì €ì¥                           â”‚
â”‚    - write_memory("plan-{feature}", ë¶„ì„ê²°ê³¼)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5ï¸âƒ£ ì‚¬ìš©ì ìŠ¹ì¸ í›„ /impl ìë™ ì‹œì‘               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì…ë ¥ í˜•ì‹

```bash
/plan "ì£¼ë¬¸ ì·¨ì†Œ ê¸°ëŠ¥"
/plan "íšŒì› ê°€ì…"
/plan "ìƒí’ˆ ê²€ìƒ‰"
```

---

## Phase 1: ìš”êµ¬ì‚¬í•­ ë¶„ì„

**Skill í™œì„±í™”**: `requirements-analyst`

### ì§ˆë¬¸ í”„ë¡œì„¸ìŠ¤

ì‚¬ìš©ì ì…ë ¥ì´ ì¶”ìƒì ì´ë©´ **êµ¬ì²´í™” ì§ˆë¬¸** ì§„í–‰:

```markdown
## ğŸ¯ ìš”êµ¬ì‚¬í•­ ë¶„ì„: {ê¸°ëŠ¥ëª…}

### ê¸°ë³¸ ì§ˆë¬¸
1. ì´ ê¸°ëŠ¥ì˜ ì£¼ìš” ì‚¬ìš©ìëŠ” ëˆ„êµ¬ì¸ê°€ìš”?
2. ì„±ê³µ ê¸°ì¤€(ì™„ë£Œ ì¡°ê±´)ì€ ë¬´ì—‡ì¸ê°€ìš”?
3. ì˜ˆì™¸ ìƒí™©ì€ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ë‚˜ìš”?

### ë„ë©”ì¸ë³„ ì§ˆë¬¸ (í•„ìš”ì‹œ)
[requirements-analyst SKILL ì°¸ì¡°]
```

### ì‚°ì¶œë¬¼

```markdown
## ğŸ“‹ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

| ID | ê·œì¹™ | ìƒì„¸ |
|----|------|------|
| BR-001 | {ê·œì¹™ëª…} | {ìƒì„¸ ì„¤ëª…} |
| BR-002 | {ê·œì¹™ëª…} | {ìƒì„¸ ì„¤ëª…} |
```

---

## Phase 2: ì˜í–¥ë„ ë¶„ì„

**Skill í™œì„±í™”**: `layer-architect`

### ì½”ë“œ ê²€ìƒ‰ (Serena MCP)

```python
# 1. ì‹¬ë³¼ ê²€ìƒ‰
mcp__serena__find_symbol(name_path_pattern="{Feature}")
mcp__serena__find_symbol(name_path_pattern="{Feature}Domain")

# 2. ì°¸ì¡° ê²€ìƒ‰
mcp__serena__find_referencing_symbols(name_path="{Feature}")

# 3. íŒ¨í„´ ê²€ìƒ‰
mcp__serena__search_for_pattern(substring_pattern="class.*{Feature}")
```

### íŒë‹¨ ê¸°ì¤€

| ì¡°ê±´ | ì „ëµ | ëª…ë ¹ì–´ |
|------|------|--------|
| ê¸°ì¡´ íŒŒì¼ ìˆ˜ì • í•„ìš” | TDD | `/kb/{layer}/go` |
| ì™„ì „íˆ ìƒˆë¡œìš´ íŒŒì¼ | Doc-Driven | `/impl {layer}` |

### ì‚°ì¶œë¬¼

```markdown
## ğŸ“Š ì˜í–¥ë„ ë¶„ì„ ê²°ê³¼

### ë ˆì´ì–´ë³„ ì‘ì—…

| ë ˆì´ì–´ | íŒŒì¼ | ìƒíƒœ | ì „ëµ |
|--------|------|------|------|
| Domain | Order.java | ğŸ”§ ìˆ˜ì • | TDD |
| Domain | CancelReason.java | ğŸ†• ì‹ ê·œ | Doc |
| Application | CancelOrderUseCase.java | ğŸ†• ì‹ ê·œ | Doc |
| Persistence | OrderEntity.java | ğŸ”§ ìˆ˜ì • | TDD |
| REST API | OrderController.java | ğŸ”§ ìˆ˜ì • | TDD |
```

---

## Phase 3: êµ¬í˜„ ì „ëµ ê²°ì •

### ë ˆì´ì–´ë³„ ë§¤í•‘

```markdown
## ğŸ—ï¸ êµ¬í˜„ ê³„íš

### Domain Layer
| ì»´í¬ë„ŒíŠ¸ | íƒ€ì… | ì „ëµ | ìš°ì„ ìˆœìœ„ |
|----------|------|------|----------|
| Order.cancel() | Method | TDD | 1 |
| CancelReason | VO | Doc | 2 |

### Application Layer
| ì»´í¬ë„ŒíŠ¸ | íƒ€ì… | ì „ëµ | ìš°ì„ ìˆœìœ„ |
|----------|------|------|----------|
| CancelOrderUseCase | Interface | Doc | 3 |
| CancelOrderService | Service | Doc | 4 |

### Persistence Layer
| ì»´í¬ë„ŒíŠ¸ | íƒ€ì… | ì „ëµ | ìš°ì„ ìˆœìœ„ |
|----------|------|------|----------|
| OrderEntity | Entity | TDD | 5 |

### REST API Layer
| ì»´í¬ë„ŒíŠ¸ | íƒ€ì… | ì „ëµ | ìš°ì„ ìˆœìœ„ |
|----------|------|------|----------|
| POST /orders/{id}/cancel | Endpoint | Doc | 6 |
```

### êµ¬í˜„ ëª…ë ¹ì–´ ìƒì„±

```markdown
## ğŸš€ ì‹¤í–‰ ê³„íš

### Phase 1: Domain (TDD - ê¸°ì¡´ ìˆ˜ì •)
```bash
/kb/domain/go  # Order.cancel() ë©”ì„œë“œ ì¶”ê°€
```

### Phase 2: Domain (Doc - ì‹ ê·œ ìƒì„±)
```bash
/impl domain cancel-order  # CancelReason VO ë“±
```

### Phase 3: Application (Doc - ì‹ ê·œ ìƒì„±)
```bash
/impl application cancel-order
```

### Phase 4: Persistence (TDD - ê¸°ì¡´ ìˆ˜ì •)
```bash
/kb/persistence/go  # OrderEntity ìˆ˜ì •
```

### Phase 5: REST API (Doc - ì‹ ê·œ/ìˆ˜ì •)
```bash
/impl rest-api cancel-order
```
```

---

## Phase 4: Serena Memory ì €ì¥

### ì €ì¥ í˜•ì‹

```python
mcp__serena__write_memory(
    memory_file_name="plan-{feature-kebab-case}",
    content="""
# Plan: {Feature Name}

## ìƒì„±ì¼ì‹œ
{timestamp}

## ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™
{Phase 1 ì‚°ì¶œë¬¼}

## ì˜í–¥ë„ ë¶„ì„
{Phase 2 ì‚°ì¶œë¬¼}

## êµ¬í˜„ ê³„íš
{Phase 3 ì‚°ì¶œë¬¼}

## ì§„í–‰ ìƒíƒœ
- [ ] Domain Layer
- [ ] Application Layer
- [ ] Persistence Layer
- [ ] REST API Layer

## ë‹¤ìŒ ëª…ë ¹ì–´
{ì‹¤í–‰í•  ëª…ë ¹ì–´}
"""
)
```

---

## Phase 5: ìë™ ì‹¤í–‰ (ìŠ¹ì¸ í›„)

ì‚¬ìš©ì ìŠ¹ì¸ í›„ ì²« ë²ˆì§¸ `/impl` ë˜ëŠ” `/kb/*/go` ìë™ ì‹¤í–‰:

```markdown
## âœ… ê³„íš ìˆ˜ë¦½ ì™„ë£Œ!

ìœ„ ê³„íšëŒ€ë¡œ ì§„í–‰í• ê¹Œìš”?

**ë‹¤ìŒ ë‹¨ê³„**: Domain Layer êµ¬í˜„ ì‹œì‘

[Y] ì§„í–‰ / [N] ìˆ˜ì • / [Q] ì·¨ì†Œ
```

ì‚¬ìš©ìê°€ `Y` ì„ íƒ ì‹œ:
- TDD ì‘ì—…ì´ ìˆìœ¼ë©´ â†’ `/kb/{layer}/go` ì‹¤í–‰
- Doc-Drivenë§Œ ìˆìœ¼ë©´ â†’ `/impl {layer} {feature}` ì‹¤í–‰

---

## ì˜ˆì‹œ ì‹¤í–‰

```
ì‚¬ìš©ì: /plan "ì£¼ë¬¸ ì·¨ì†Œ ê¸°ëŠ¥"

Claude:
## ğŸ¯ ìš”êµ¬ì‚¬í•­ ë¶„ì„: ì£¼ë¬¸ ì·¨ì†Œ

ëª‡ ê°€ì§€ ì§ˆë¬¸ìœ¼ë¡œ ë””í…Œì¼ì„ í™•ë³´í• ê²Œìš”:

1. ì–´ëŠ ìƒíƒœê¹Œì§€ ì·¨ì†Œ ê°€ëŠ¥í•œê°€ìš”?
   - [ ] PLACEDë§Œ
   - [ ] PLACED + CONFIRMED
   - [ ] SHIPPED í¬í•¨

2. ë¶€ë¶„ ì·¨ì†Œê°€ ê°€ëŠ¥í•œê°€ìš”?
   - [ ] ì „ì²´ ì·¨ì†Œë§Œ
   - [ ] ë¶€ë¶„ ì·¨ì†Œ ê°€ëŠ¥

3. í™˜ë¶ˆ ì²˜ë¦¬ ë°©ì‹ì€?
   - [ ] ì¦‰ì‹œ í™˜ë¶ˆ (ë™ê¸°)
   - [ ] ìŠ¹ì¸ í›„ í™˜ë¶ˆ (ë¹„ë™ê¸°)

---

ì‚¬ìš©ì: PLACED+CONFIRMED, ì „ì²´ë§Œ, ë¹„ë™ê¸°

Claude:
## ğŸ“‹ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

| ID | ê·œì¹™ | ìƒì„¸ |
|----|------|------|
| BR-001 | ì·¨ì†Œ ê°€ëŠ¥ ìƒíƒœ | PLACED, CONFIRMED |
| BR-002 | ì·¨ì†Œ ë²”ìœ„ | ì „ì²´ ì·¨ì†Œë§Œ |
| BR-003 | í™˜ë¶ˆ ì²˜ë¦¬ | ë¹„ë™ê¸° (Orchestration) |

## ğŸ“Š ì˜í–¥ë„ ë¶„ì„ ì¤‘...

[Serena MCPë¡œ ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰]

### ê²€ìƒ‰ ê²°ê³¼

| ë ˆì´ì–´ | íŒŒì¼ | ìƒíƒœ |
|--------|------|------|
| Domain | Order.java | ğŸ”§ ìˆ˜ì • í•„ìš” |
| Application | - | ğŸ†• ì‹ ê·œ |
| Persistence | OrderEntity.java | ğŸ”§ ìˆ˜ì • í•„ìš” |
| REST API | - | ğŸ†• ì‹ ê·œ |

## ğŸš€ êµ¬í˜„ ê³„íš

1. [TDD] Domain: Order.cancel() ì¶”ê°€
2. [Doc] Application: CancelOrderUseCase ìƒì„±
3. [TDD] Persistence: OrderEntity ìˆ˜ì •
4. [Doc] REST API: POST /orders/{id}/cancel

---

âœ… Serena memory ì €ì¥ ì™„ë£Œ: `plan-order-cancel`

ìœ„ ê³„íšëŒ€ë¡œ ì§„í–‰í• ê¹Œìš”? [Y/N]
```

---

## ì»´íŒ©íŒ… ëŒ€ì‘

ì˜¤í† ì»´íŒ©íŒ… í›„ì—ë„ ì‘ì—… ì¬ê°œ ê°€ëŠ¥:

```bash
# ì»´íŒ©íŒ… í›„
ì‚¬ìš©ì: ì•„ê¹Œ í•˜ë˜ ì£¼ë¬¸ ì·¨ì†Œ ì‘ì—… ê³„ì†í•´ì¤˜

Claude:
# Serena memory ì½ê¸°
mcp__serena__read_memory(memory_file_name="plan-order-cancel")

# ì§„í–‰ ìƒíƒœ í™•ì¸ í›„ ì´ì–´ì„œ ì§„í–‰
```

---

## ê´€ë ¨ ì»¤ë§¨ë“œ

- `/impl {layer} {feature}` - Doc-Driven êµ¬í˜„
- `/kb/{layer}/go` - TDD ê¸°ë°˜ ìˆ˜ì •
- `/create-prd` - ì „ì²´ PRD ë¬¸ì„œ ìƒì„± (ëŒ€ê·œëª¨ ê¸°ëŠ¥)
