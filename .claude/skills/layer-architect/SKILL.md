---
name: layer-architect
version: 3.0.0
description: |
  ë ˆì´ì–´ ì•„í‚¤í…íŠ¸. ê¸°ëŠ¥ì„ í—¥ì‚¬ê³ ë‚  ë ˆì´ì–´ì— ë§¤í•‘. ê¸°ì¡´ ì½”ë“œ ì˜í–¥ë„ ë¶„ì„.
  ìˆ˜ì • vs ì‹ ê·œ íŒë‹¨ (TDD vs Doc-Driven ë¶„ê¸°). Serena MCP ê²€ìƒ‰ í™œìš©.
  /plan ëª…ë ¹ ì‹œ ìë™ í™œì„±í™”. êµ¬í˜„ ìˆœì„œ ë° ì „ëµ ê²°ì •.
author: claude-spring-standards
created: 2024-11-01
updated: 2025-12-05
tags: [project, architecture, hexagonal, layer-mapping, impact-analysis]
---

# Layer Architect (ë ˆì´ì–´ ì•„í‚¤í…íŠ¸)

## ëª©ì  (Purpose)

**ê¸°ëŠ¥ â†’ í—¥ì‚¬ê³ ë‚  ë ˆì´ì–´ ë§¤í•‘** ë° **ì˜í–¥ë„ ë¶„ì„** ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
requirements-analystê°€ ë„ì¶œí•œ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì„ ë ˆì´ì–´ë³„ êµ¬í˜„ ê³„íšìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

## í™œì„±í™” ì¡°ê±´

- `/plan "{ê¸°ëŠ¥}"` ì»¤ë§¨ë“œ ì‹¤í–‰ ì‹œ (requirements-analyst í›„)
- ê¸°ëŠ¥ êµ¬í˜„ ìš”ì²­ ì‹œ
- ì•„í‚¤í…ì²˜ ê²°ì • í•„ìš” ì‹œ
- ë ˆì´ì–´ ë§¤í•‘ í‚¤ì›Œë“œ ì–¸ê¸‰ ì‹œ

## ì‚°ì¶œë¬¼ (Output)

| ì‚°ì¶œë¬¼ | í˜•ì‹ | ì €ì¥ ìœ„ì¹˜ |
|--------|------|----------|
| ì˜í–¥ë„ ë¶„ì„ ê²°ê³¼ | Markdown | Serena Memory (`plan-{feature}`) |
| ë ˆì´ì–´ ë§¤í•‘ í…Œì´ë¸” | Table | ë¶„ì„ ê²°ê³¼ ë‚´ |
| êµ¬í˜„ ì „ëµ (TDD/Doc-Driven) | Decision | ë¶„ì„ ê²°ê³¼ ë‚´ |
| êµ¬í˜„ ìˆœì„œ | Ordered List | ë¶„ì„ ê²°ê³¼ ë‚´ |

## ì™„ë£Œ ê¸°ì¤€ (Acceptance Criteria)

- [ ] ê¸°ì¡´ ì½”ë“œ ì˜í–¥ë„ ë¶„ì„ ì™„ë£Œ (Serena MCP ê²€ìƒ‰)
- [ ] ìˆ˜ì • vs ì‹ ê·œ íŒë‹¨ ì™„ë£Œ
- [ ] ë ˆì´ì–´ë³„ ì»´í¬ë„ŒíŠ¸ ë§¤í•‘ ì™„ë£Œ
- [ ] êµ¬í˜„ ìˆœì„œ ê²°ì • ì™„ë£Œ
- [ ] Serena Memory ì—…ë°ì´íŠ¸ ì™„ë£Œ
- [ ] ë‹¤ìŒ ë‹¨ê³„(impl/kb) ì‹¤í–‰ ê°€ëŠ¥ ìƒíƒœ

---

## í•µì‹¬ íŒë‹¨ ë¡œì§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì „ëµ ë¶„ê¸° ë¡œì§                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ê¸°ì¡´ ì½”ë“œ ìˆìŒ?                                              â”‚
â”‚  â”œâ”€â”€ YES â†’ ìˆ˜ì • í•„ìš”?                                        â”‚
â”‚  â”‚         â”œâ”€â”€ YES â†’ TDD ì ìš© (/kb/*/go)                    â”‚
â”‚  â”‚         â””â”€â”€ NO  â†’ ê¸°ì¡´ ì½”ë“œ ì¬ì‚¬ìš©                        â”‚
â”‚  â””â”€â”€ NO  â†’ Doc-Driven (/impl) - ì‹ ê·œ ìƒì„±                   â”‚
â”‚                                                              â”‚
â”‚  âš ï¸ í•µì‹¬: ê¸°ì¡´ ì½”ë“œ ìˆ˜ì •ì€ TDDë¡œ ì•ˆì „í•˜ê²Œ,                    â”‚
â”‚          ì‹ ê·œ ì½”ë“œëŠ” Doc-Drivenìœ¼ë¡œ ë¹ ë¥´ê²Œ                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë¶„ì„ í”„ë¡œì„¸ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Layer Architecture Analysis Flow               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1ï¸âƒ£ ì˜í–¥ë„ ë¶„ì„ (Impact Analysis)                           â”‚
â”‚     â””â”€ Serena MCPë¡œ ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰                           â”‚
â”‚                                                              â”‚
â”‚  2ï¸âƒ£ ë ˆì´ì–´ ë§¤í•‘ (Layer Mapping)                             â”‚
â”‚     â””â”€ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ â†’ ë ˆì´ì–´ë³„ ì»´í¬ë„ŒíŠ¸                      â”‚
â”‚                                                              â”‚
â”‚  3ï¸âƒ£ êµ¬í˜„ ì „ëµ ê²°ì • (Strategy Decision)                      â”‚
â”‚     â””â”€ TDD (ìˆ˜ì •) vs Doc-Driven (ì‹ ê·œ)                       â”‚
â”‚                                                              â”‚
â”‚  4ï¸âƒ£ êµ¬í˜„ ìˆœì„œ ê²°ì • (Implementation Order)                   â”‚
â”‚     â””â”€ ì˜ì¡´ì„± ê¸°ë°˜ ìˆœì„œ                                       â”‚
â”‚                                                              â”‚
â”‚  5ï¸âƒ£ Serena Memory ì—…ë°ì´íŠ¸                                  â”‚
â”‚     â””â”€ plan-{feature} ì—…ë°ì´íŠ¸                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1ï¸âƒ£ ì˜í–¥ë„ ë¶„ì„ (Impact Analysis)

### Serena MCP ê²€ìƒ‰ ì „ëµ

```bash
# 1. ì‹¬ë³¼ ê²€ìƒ‰ (ì •í™•í•œ ì´ë¦„ ì•Œ ë•Œ)
mcp__serena__find_symbol: name_path="Order", include_body=false

# 2. ì°¸ì¡° ê²€ìƒ‰ (ì‚¬ìš©ì²˜ íŒŒì•…)
mcp__serena__find_referencing_symbols: name_path="Order", relative_path="domain/"

# 3. íŒ¨í„´ ê²€ìƒ‰ (ì´ë¦„ ëª¨ë¥¼ ë•Œ)
mcp__serena__search_for_pattern: substring_pattern="class.*Order"

# 4. íŒŒì¼ ê°œìš” (êµ¬ì¡° íŒŒì•…)
mcp__serena__get_symbols_overview: relative_path="domain/order/"
```

### ê²€ìƒ‰ ëŒ€ìƒ íŒ¨í„´

| ëŒ€ìƒ | ê²€ìƒ‰ íŒ¨í„´ | ì˜ˆì‹œ |
|------|----------|------|
| Aggregate | `{Feature}`, `{Feature}Domain` | `Order`, `OrderDomain` |
| UseCase | `{Action}{Feature}UseCase` | `CancelOrderUseCase` |
| Service | `{Action}{Feature}Service` | `CancelOrderService` |
| Controller | `{Feature}Controller`, `{Feature}CommandController` | `OrderCommandController` |
| Entity | `{Feature}Entity`, `{Feature}JpaEntity` | `OrderEntity` |

### ì˜í–¥ë„ ë¶„ì„ í…œí”Œë¦¿

```markdown
## ì˜í–¥ë„ ë¶„ì„: {ê¸°ëŠ¥ëª…}

### ğŸ” ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰ ê²°ê³¼

| ë ˆì´ì–´ | íŒŒì¼ | ìƒíƒœ | ì˜í–¥ë„ |
|--------|------|------|--------|
| Domain | Order.java | ğŸ”§ ìˆ˜ì • í•„ìš” | cancel() ë©”ì„œë“œ ì¶”ê°€ |
| Domain | OrderStatus.java | âœ… ìˆìŒ | CANCELLED ìƒíƒœ í™•ì¸ |
| Application | - | ğŸ†• ì‹ ê·œ | CancelOrderUseCase ìƒì„± |
| Persistence | OrderEntity.java | ğŸ”§ ìˆ˜ì • í•„ìš” | status ì»¬ëŸ¼ ë§¤í•‘ í™•ì¸ |
| REST API | - | ğŸ†• ì‹ ê·œ | POST /orders/{id}/cancel ì¶”ê°€ |

### ğŸ“Š íŒë‹¨ ê²°ê³¼

- **ìˆ˜ì • (TDD ì ìš©)**: Domain (Order.java), Persistence (OrderEntity.java)
- **ì‹ ê·œ (Doc-Driven)**: Application (UseCase), REST API (Controller)
- **ì¬ì‚¬ìš©**: Domain (OrderStatus.java)
```

---

## 2ï¸âƒ£ ë ˆì´ì–´ ë§¤í•‘ (Layer Mapping)

### í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ ë ˆì´ì–´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Hexagonal Architecture                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  REST API   â”‚                       â”‚ Persistence â”‚      â”‚
â”‚  â”‚  (Adapter-In)                       â”‚ (Adapter-Out)      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                                     â”‚              â”‚
â”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Application â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                   â”‚   (Port)    â”‚                            â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                          â”‚                                   â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                   â”‚   Domain    â”‚                            â”‚
â”‚                   â”‚  (Core)     â”‚                            â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë ˆì´ì–´ë³„ ì»´í¬ë„ŒíŠ¸ ë§¤í•‘

```markdown
## ë ˆì´ì–´ ë§¤í•‘: {ê¸°ëŠ¥ëª…}

### ğŸ—ï¸ Domain Layer (í•µì‹¬)
| ì»´í¬ë„ŒíŠ¸ | íƒ€ì… | ì„¤ëª… |
|----------|------|------|
| Order.cancel() | Method | ì·¨ì†Œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ |
| CancelReason | VO | ì·¨ì†Œ ì‚¬ìœ  |
| OrderCancelledException | Exception | ì·¨ì†Œ ë¶ˆê°€ ì˜ˆì™¸ |
| OrderCancelledEvent | Event | ì·¨ì†Œ ì´ë²¤íŠ¸ ë°œí–‰ |

### âš™ï¸ Application Layer (ì¡°ìœ¨)
| ì»´í¬ë„ŒíŠ¸ | íƒ€ì… | ì„¤ëª… |
|----------|------|------|
| CancelOrderUseCase | Interface | ì·¨ì†Œ ìœ ìŠ¤ì¼€ì´ìŠ¤ í¬íŠ¸ |
| CancelOrderService | Service | ìœ ìŠ¤ì¼€ì´ìŠ¤ êµ¬í˜„ |
| CancelOrderCommand | DTO | ì·¨ì†Œ ìš”ì²­ ë°ì´í„° |
| OrderCancelledEventListener | Listener | í™˜ë¶ˆ ì²˜ë¦¬ íŠ¸ë¦¬ê±° |

### ğŸ’¾ Persistence Layer (ì €ì¥)
| ì»´í¬ë„ŒíŠ¸ | íƒ€ì… | ì„¤ëª… |
|----------|------|------|
| OrderEntity | Entity | status í•„ë“œ ìˆ˜ì • |
| OrderHistoryEntity | Entity | ì·¨ì†Œ ì´ë ¥ ì €ì¥ (ì‹ ê·œ) |

### ğŸŒ REST API Layer (ì§„ì…ì )
| ì»´í¬ë„ŒíŠ¸ | íƒ€ì… | ì„¤ëª… |
|----------|------|------|
| POST /orders/{id}/cancel | Endpoint | ì·¨ì†Œ API |
| CancelOrderRequest | DTO | ìš”ì²­ DTO |
| OrderResponse | DTO | ì‘ë‹µ DTO (ê¸°ì¡´ ì¬ì‚¬ìš©) |
```

---

## 3ï¸âƒ£ êµ¬í˜„ ì „ëµ ê²°ì • (Strategy Decision)

### ì „ëµ ë¶„ê¸° í…Œì´ë¸”

| ìƒí™© | ì „ëµ | ì»¤ë§¨ë“œ | ì´ìœ  |
|------|------|--------|------|
| ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • | TDD | `/kb/{layer}/go` | í…ŒìŠ¤íŠ¸ë¡œ ê¸°ì¡´ ë™ì‘ ë³´í˜¸ |
| ì‹ ê·œ ì½”ë“œ ìƒì„± | Doc-Driven | `/impl {layer}` | ì»¨ë²¤ì…˜ ê¸°ë°˜ ë¹ ë¥¸ ìƒì„± |
| ê¸°ì¡´ ì½”ë“œ ì¬ì‚¬ìš© | - | - | ë³€ê²½ ì—†ìŒ |

### êµ¬í˜„ ì „ëµ í…œí”Œë¦¿

```markdown
## êµ¬í˜„ ì „ëµ

### ğŸ”§ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • (TDD ì ìš©)
> í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‘ì„± â†’ ì•ˆì „í•˜ê²Œ ìˆ˜ì •

1. **Domain: Order.java**
   - `/kb/domain/go` ì‚¬ìš©
   - cancel() ë©”ì„œë“œ ì¶”ê°€
   - í…ŒìŠ¤íŠ¸: OrderTest.shouldCancelWhenPlaced()

2. **Persistence: OrderEntity.java**
   - `/kb/persistence/go` ì‚¬ìš©
   - status ë§¤í•‘ í™•ì¸

### ğŸ†• ì‹ ê·œ ì½”ë“œ ìƒì„± (Doc-Driven)
> ì»¨ë²¤ì…˜ ê¸°ë°˜ ë¹ ë¥¸ êµ¬í˜„

1. **Application: CancelOrderUseCase**
   - `/impl application cancel-order`
   - êµ¬í˜„ + í…ŒìŠ¤íŠ¸ ë™ì‹œ ì‘ì„±

2. **REST API: CancelOrderController**
   - `/impl rest-api cancel-order`
   - êµ¬í˜„ + í…ŒìŠ¤íŠ¸ ë™ì‹œ ì‘ì„±
```

---

## 4ï¸âƒ£ êµ¬í˜„ ìˆœì„œ ê²°ì • (Implementation Order)

### ì˜ì¡´ì„± ê¸°ë°˜ ìˆœì„œ

```
Domain (ê¸°ë°˜) â†’ Application (ì¤‘ê°„) â†’ Persistence (ì—°ê²°) â†’ REST API (ì§„ì…ì )
```

### êµ¬í˜„ ìˆœì„œ í…œí”Œë¦¿

```markdown
## êµ¬í˜„ ìˆœì„œ

### Phase 1: Domain (ê¸°ë°˜) - ì˜ì¡´ì„± ì—†ìŒ
1. [TDD] Order.cancel() ë©”ì„œë“œ
2. [Doc] CancelReason VO
3. [Doc] OrderCancelledException

### Phase 2: Application (ì¤‘ê°„) - Domain ì˜ì¡´
4. [Doc] CancelOrderCommand
5. [Doc] CancelOrderUseCase
6. [Doc] CancelOrderService

### Phase 3: Persistence (ì—°ê²°) - Domain ì˜ì¡´
7. [TDD] OrderEntity ìˆ˜ì •
8. [Doc] OrderHistoryEntity

### Phase 4: REST API (ì§„ì…ì ) - Application ì˜ì¡´
9. [Doc] CancelOrderRequest
10. [Doc] OrderCommandController ìˆ˜ì •
```

### ì»¤ë§¨ë“œ ì‹¤í–‰ ìˆœì„œ

```bash
# Phase 1: Domain
/kb/domain/go           # Order.cancel() ìˆ˜ì • (TDD)
/impl domain cancel-order  # VO, Exception ì‹ ê·œ

# Phase 2: Application
/impl application cancel-order

# Phase 3: Persistence
/kb/persistence/go      # Entity ìˆ˜ì • (TDD)
/impl persistence cancel-order  # ì‹ ê·œ Entity

# Phase 4: REST API
/impl rest-api cancel-order
```

---

## 5ï¸âƒ£ ì‚°ì¶œë¬¼ í˜•ì‹

### ìµœì¢… ì‚°ì¶œë¬¼ í…œí”Œë¦¿

```markdown
## ğŸ“‹ ë ˆì´ì–´ ì•„í‚¤í…ì²˜ ë¶„ì„ ê²°ê³¼

### ê¸°ëŠ¥: {ê¸°ëŠ¥ëª…}

### ì˜í–¥ë„ ìš”ì•½
- ğŸ”§ ìˆ˜ì • í•„ìš”: 2ê°œ íŒŒì¼ (TDD ì ìš©)
- ğŸ†• ì‹ ê·œ ìƒì„±: 6ê°œ íŒŒì¼ (Doc-Driven)
- âœ… ì¬ì‚¬ìš©: 1ê°œ íŒŒì¼

### ë ˆì´ì–´ë³„ ì‘ì—…

#### Domain Layer
| ì‘ì—… | íŒŒì¼ | ì „ëµ | ìš°ì„ ìˆœìœ„ |
|------|------|------|----------|
| cancel() ì¶”ê°€ | Order.java | TDD | 1 |
| VO ìƒì„± | CancelReason.java | Doc | 2 |

#### Application Layer
| ì‘ì—… | íŒŒì¼ | ì „ëµ | ìš°ì„ ìˆœìœ„ |
|------|------|------|----------|
| UseCase ìƒì„± | CancelOrderUseCase.java | Doc | 3 |

[ë‚˜ë¨¸ì§€ ë ˆì´ì–´...]

### êµ¬í˜„ ëª…ë ¹ì–´

\`\`\`bash
# Phase 1: Domain (TDD)
/kb/domain/go  # Order.cancel() ìˆ˜ì •

# Phase 2: Domain (Doc-Driven)
/impl domain cancel-order  # VO, Exception ì‹ ê·œ

# Phase 3: Application
/impl application cancel-order

# Phase 4: Persistence
/impl persistence cancel-order

# Phase 5: REST API
/impl rest-api cancel-order
\`\`\`

### ë‹¤ìŒ ë‹¨ê³„
â†’ Phase 1ë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ êµ¬í˜„ ì‹œì‘
```

---

## Serena Memory ì—…ë°ì´íŠ¸

### ì—…ë°ì´íŠ¸ ë‚´ìš©

```markdown
# Plan: ì£¼ë¬¸ ì·¨ì†Œ ê¸°ëŠ¥ (ì—…ë°ì´íŠ¸)

## ìƒíƒœ
- ìƒì„±ì¼: 2025-12-05
- ë‹¨ê³„: ë ˆì´ì–´ ì•„í‚¤í…ì²˜ ë¶„ì„ ì™„ë£Œ
- ë‹¤ìŒ: Phase 1 Domain êµ¬í˜„

## ì˜í–¥ë„ ë¶„ì„
[ì˜í–¥ë„ ë¶„ì„ ê²°ê³¼]

## ë ˆì´ì–´ ë§¤í•‘
[ë ˆì´ì–´ë³„ ì»´í¬ë„ŒíŠ¸ ë§¤í•‘]

## êµ¬í˜„ ì „ëµ
[TDD/Doc-Driven ë¶„ê¸°]

## êµ¬í˜„ ìˆœì„œ
[Phaseë³„ ìˆœì„œ]

## ì§„í–‰ ìƒí™©
- [x] ìš”êµ¬ì‚¬í•­ ë¶„ì„ (requirements-analyst)
- [x] ë ˆì´ì–´ ë§¤í•‘ (layer-architect)
- [ ] Domain êµ¬í˜„
- [ ] Application êµ¬í˜„
- [ ] Persistence êµ¬í˜„
- [ ] REST API êµ¬í˜„
```

---

## Zero-Tolerance ê·œì¹™ ì²´í¬

ë ˆì´ì–´ ë§¤í•‘ ì‹œ ìë™ ê²€ì¦:

### Domain Layer
- âœ… Lombok ê¸ˆì§€
- âœ… Law of Demeter (Getter ì²´ì´ë‹ ê¸ˆì§€)
- âœ… Tell, Don't Ask íŒ¨í„´
- âœ… Long FK ì „ëµ

### Application Layer
- âœ… Transaction ê²½ê³„ (`@Transactional` ë‚´ ì™¸ë¶€ API ê¸ˆì§€)
- âœ… CQRS ë¶„ë¦¬ (Command/Query ë¶„ë¦¬)
- âœ… DTOëŠ” Record
- âœ… `@Component` ì‚¬ìš© (`@Service` ê¸ˆì§€)

### Persistence Layer
- âœ… Long FK ì „ëµ (JPA ê´€ê³„ ì–´ë…¸í…Œì´ì…˜ ê¸ˆì§€)
- âœ… QueryDSL DTO Projection
- âœ… Lombok ê¸ˆì§€
- âœ… Mapper ë¶„ë¦¬

### REST API Layer
- âœ… RESTful ì„¤ê³„
- âœ… Request/Response DTO ë¶„ë¦¬
- âœ… `@Valid` í•„ìˆ˜
- âœ… TestRestTemplate (MockMvc ê¸ˆì§€)

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸ (Output Checklist)

### ë¶„ì„ ì™„ë£Œ ì²´í¬

- [ ] Serena MCPë¡œ ê¸°ì¡´ ì½”ë“œ ê²€ìƒ‰ ì™„ë£Œ
- [ ] ì˜í–¥ë„ í…Œì´ë¸” ì‘ì„±ë¨ (ìˆ˜ì •/ì‹ ê·œ/ì¬ì‚¬ìš©)
- [ ] ë ˆì´ì–´ë³„ ì»´í¬ë„ŒíŠ¸ ë§¤í•‘ë¨
- [ ] êµ¬í˜„ ì „ëµ ê²°ì •ë¨ (TDD/Doc-Driven)
- [ ] êµ¬í˜„ ìˆœì„œ ê²°ì •ë¨ (Phaseë³„)
- [ ] ì‹¤í–‰ ì»¤ë§¨ë“œ ëª©ë¡ ì‘ì„±ë¨
- [ ] Serena Memory ì—…ë°ì´íŠ¸ë¨

### í’ˆì§ˆ ì²´í¬

- [ ] Zero-Tolerance ê·œì¹™ ìœ„ë°˜ ì—†ìŒ
- [ ] ì˜ì¡´ì„± ìˆœì„œê°€ ì˜¬ë°”ë¦„ (Domain â†’ Application â†’ Persistence â†’ REST API)
- [ ] ê° Phaseê°€ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•¨

---

## ì—°ê³„ Skill

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    /plan ì‹¤í–‰ íë¦„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  requirements-analyst                                       â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”‚ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ë¬¸ì„œ                                   â”‚
â”‚       â–¼                                                     â”‚
â”‚  layer-architect (í˜„ì¬)                                     â”‚
â”‚       â”‚                                                     â”‚
â”‚       â”‚ ë ˆì´ì–´ë³„ êµ¬í˜„ ê³„íš                                   â”‚
â”‚       â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ê¸°ì¡´ ìˆ˜ì • (TDD)          â”‚ ì‹ ê·œ ìƒì„± (Doc-Driven)      â”‚â”‚
â”‚  â”‚ /kb/domain/go            â”‚ /impl domain                â”‚â”‚
â”‚  â”‚ /kb/application/go       â”‚ /impl application           â”‚â”‚
â”‚  â”‚ /kb/persistence/go       â”‚ /impl persistence           â”‚â”‚
â”‚  â”‚ /kb/rest-api/go          â”‚ /impl rest-api              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚       â”‚                                                     â”‚
â”‚       â–¼                                                     â”‚
â”‚  testing-expert (ê²€ì¦)                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì°¸ì¡° ë¬¸ì„œ

- **CLAUDE.md**: `.claude/CLAUDE.md` - í”„ë¡œì íŠ¸ ì „ì²´ ì›Œí¬í”Œë¡œìš°
- **Requirements Analyst**: `.claude/skills/requirements-analyst/SKILL.md` - ì´ì „ ë‹¨ê³„ Skill
- **Domain Expert**: `.claude/skills/domain-expert/SKILL.md` - Domain êµ¬í˜„ ì „ë¬¸ê°€
- **UseCase Expert**: `.claude/skills/usecase-expert/SKILL.md` - Application êµ¬í˜„ ì „ë¬¸ê°€
- **Repository Expert**: `.claude/skills/repository-expert/SKILL.md` - Persistence êµ¬í˜„ ì „ë¬¸ê°€
- **Controller Expert**: `.claude/skills/controller-expert/SKILL.md` - REST API êµ¬í˜„ ì „ë¬¸ê°€
